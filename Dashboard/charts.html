<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analytics | SpotCrime</title>
    <link rel="icon" href="assets/shield.png" type="image/icon type">
    <!--Bootstrap-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
    <!--Google Fonts-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@300;400;500;700;800&display=swap"
        rel="stylesheet">
    <!-- Font Awesome -->
    <script src="https://kit.fontawesome.com/996973c893.js" crossorigin="anonymous"></script>
    <!--Map Box-->
    <script src='https://api.mapbox.com/mapbox-gl-js/v2.3.1/mapbox-gl.js'></script>
    <link href='https://api.mapbox.com/mapbox-gl-js/v2.3.1/mapbox-gl.css' rel='stylesheet' />
    <!--Chart JS-->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!--Javascript (Modal Trigger)  -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>

</head>

<body style="background-color: #181820; font-family: 'Work Sans', sans-serif; max-width: 1900px;">

    <nav class="navbar navbar-expand-lg"
        style="background-color: #1D1D27; box-shadow: 0px 8px 8px -6px rgba(0,0,0,.25);">
        <div class="container-fluid">
            <a class="navbar-brand" style="color: #FC76A1; font-weight: 700;">SpotCrime</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <!-- <a class="nav-link active" aria-current="page" href="#">Home</a> -->
                    </li>
                </ul>
                <ul class="navbar-nav ml-auto">

                    <li class="nav-item" id="profilepicicon">
                        <!-- <img src="assets/profilepic.png" type="button" data-bs-toggle="modal"
                            data-bs-target="#exampleModal" style="margin: 0.2vw; height: 35px; width: 35px;"> -->
                    </li>

                </ul>
            </div>
        </div>
    </nav>

    <div class="container-fluid" style="background-color: #181820; ">
        <div class="row">
            <div class="col-2" style=" background-color: #1D1D27; text-align: left; border-bottom-right-radius: 1vw;">
                <table class="container" style="margin-top: 3vw; ">
                    <tbody style="color: white;">
                        <tr class="fade-item">
                            <td class="fade-item" style="padding: 1vw; border-radius: 0.5vw; "><i
                                    style="background-color: #FC76A1; padding: 8px; font-size: 22px; border-radius: 1vw;"
                                    class="fas fa-exclamation-circle"></i><span
                                    style="font-size: 15px; font-weight: 500;">
                                    &nbsp<a href="home.html"> Cases</a></span> </td>
                        </tr>
                        <tr style="height: 1vw;">
                        <tr>
                            <td class="fade-item"
                                style="padding: 1vw; border-radius: 0.5vw; background-color: #272732; "><i
                                    style="background-color: #70C4BF; padding: 8px; font-size: 20px; border-radius: 1vw;"
                                    class="fas fa-chart-line"></i><span style="font-size: 15px; font-weight: 500;">
                                    &nbsp<a href="analytics.html"> Analytics</a></span> </td>
                        </tr>
                        <tr style="height: 1vw;"></tr>
                        <tr>
                            <td class="fade-item" style="padding: 1vw; border-radius: 0.5vw;"><i
                                    style="background-color: #AE68E6; padding: 8px; font-size: 20px; border-radius: 1vw;"
                                    class="fas fa-book"></i><span style="font-size: 15px; font-weight: 500;">
                                    &nbsp<a href="documentation.html"> Documentation</a></span> </td>
                        </tr>
                        <tr style="height: 1vw;"></tr>
                        <tr>
                            <td class="fade-item" style="padding: 1vw; border-radius: 0.5vw;"><i
                                    style="background-color: #E39264; padding: 8px; font-size: 20px; border-radius: 1vw;"
                                    class="fas fa-user-friends"></i><span style="font-size: 15px; font-weight: 500;">
                                    &nbsp<a href="aboutus.html"> About Us</a></span> </td>
                        </tr>
                    </tbody>
                </table>
            </div>


            <div class="col-8" style="background-color: #181820; text-align: left; margin-top: 1vw;">

                <div class="row">
                    <div class="col-6" style="width: 50%; height: 620px;">
                        <h4 style="color: #FC76A1; text-align: center; background-color: #1D1D26;  
                        border-style: solid; border-color: #FC76A1; padding: 0.5vw; border-radius: 1vw;">Category wise
                        </h4>
                        <hr>
                        <canvas id="myChart1" width="400" height="400"></canvas>
                        <canvas id="myChart2" width="400" height="400"></canvas>
                        <canvas id="myChart3" width="400" height="400"></canvas>
                    </div>
                    <div class="col-6" style="width: 50%; height: 620px;">
                        <h4 style="color: #FC76A1; text-align: center; background-color: #1D1D26; 
                        border-style: solid; border-color: #FC76A1; padding: 0.5vw; border-radius: 1vw;">Monthly
                            analysis</h4>
                        <hr>
                        <canvas id="myChart4" width="400" height="400"></canvas>
                        <canvas id="myChart5" width="400" height="400"></canvas>
                        <canvas id="myChart6" width="400" height="400"></canvas>
                    </div>
                    <br>
                    <!-- <div class="col-4" style="width: 33%; height: 620px;">
                        <h4 style="color: #FC76A1; text-align: center; background-color: #1D1D26; 
                        border-style: solid; border-color: #FC76A1; padding: 0.5vw; border-radius: 1vw;">Pending cases
                        </h4>
                        <hr>
                        <canvas id="myChart7" width="400" height="400"></canvas>
                    
                    </div> -->
                    <div style="height: 3.6437vw;"></div>
                    <div class="row" style="text-align: center;">


                        <div class="btn-group" role="group" aria-label="Basic example">

                            <button onclick="getpie()" type="button" class="btn btn-dark"><i class="fas fa-chart-pie"
                                    style="color: #FAB91D; font-size: 24px;"></i></button>
                            <button onclick="getbar()" type="button" class="btn btn-dark"><i class="fas fa-chart-bar"
                                    style="color: #FAB91D; font-size: 24px;"></i></button>
                            <button onclick="getline()" type="button" class="btn btn-dark"><i class="fas fa-chart-area"
                                    style="color: #FAB91D; font-size: 24px;"></i></button>
                        </div>

                    </div>
                </div>


            </div>




            <div class="col-2" style=" background-color: #1D1D27; text-align: left; border-bottom-left-radius: 1vw;">
                <table class="container" style="margin-top: 3vw; ">
                    <tbody style="color: white;">
                        <tr class="fade-item">
                            <td class="fade-item" style="padding: 1vw; border-radius: 0.5vw;"><i
                                    style="background-color: #D25A61; padding: 8px; font-size: 20px; border-radius: 1vw;"
                                    class="fas fa-map-marked-alt"></i><span style="font-size: 15px; font-weight: 500;">
                                    &nbsp<a href="analytics.html"> Map</a></span> </td>
                        </tr>
                        <tr style="height: 1vw;">
                        <tr>
                            <td class="fade-item"
                                style="padding: 1vw; border-radius: 0.5vw;  background-color: #272732;"><i
                                    style="background-color: #DBBE56; padding: 8px; font-size: 20px; border-radius: 1vw;"
                                    class="fas fa-chart-pie"></i><span style="font-size: 15px; font-weight: 500;">
                                    &nbsp<a href="charts.html"> Charts</a></span> </td>
                        </tr>
                        <tr style="height: 1vw;"></tr>
                        <tr>
                            <td class="fade-item" style="padding: 1vw; border-radius: 0.5vw;"><i
                                    style="background-color: #9E7F72; padding: 8px; font-size: 20px; border-radius: 1vw;"
                                    class="fas fa-table"></i><span style="font-size: 15px; font-weight: 500;">
                                    &nbsp<a href="#solved-cases"> Table</a></span> </td>
                        </tr>

                    </tbody>
                </table>
            </div>


        </div>



        <br>

        <div class="row" id="solved-cases"
            style="width: 100%; background-color: #1D1D27; margin-left: 0.07%; padding: 2vw; border-radius: 2vw; overflow: visible;">
            <h5 style="color: white;" class="my-2 mx-2">Solved cases</h5>

            <div class="input-group mb-4 my-3 mx-1" style="width: 300px; float: right;">
                <input id="searchreport2" type="text" class="form-control" placeholder="Search case ID"
                    style="color: white; background-color: #343446; border-color: #FC76A1; float: right;"
                    aria-label="Search Case ID" aria-describedby="button-addon2">
                <button id="searchbutton2" onclick="SearchReport2()" class="btn btn-outline-secondary" type="button"
                    id="button-addon2" style="border-color: #FC76A1;"><i class="fas fa-search"></i></button>
            </div>

            <table style="color: white; margin-top: 2vw; " id="AnalyticsTableContent">

                <tr style="padding: 1vw;">
                    <th>Case ID</th>
                    <th>Issue date and time</th>
                    <th>Location</th>
                    <th>Crime type</th>
                    <th>Reporter's name</th>
                    <th>Police assigned</th>

                </tr>
                <tr>
                    <td colspan="6">
                        <hr style="background-color: #FC76A1; height: 2px; opacity: 100%; border-radius: 1vw;">
                    </td>
                </tr>


            </table>

        </div>

        <br>

    </div>


    <!-- Solved cases details modal -->
    <div class="modal fade" id="SolvedCasesDetails" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true"
        data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog modal-xl">
            <div class="modal-content" style="background-color: #1D1D26; border-radius: 2vw; ">
                <div class="modal-header" style="background-color: #1D1D26; border-color: #1D1D26; border-radius: 2vw;">
                    <h5 class="modal-title" id="exampleModalLabel" style="color: white; font-weight: 700;">Case details
                    </h5>
                    <button type="button" class="btn-close" onclick="DestroyReportDetails()"></button>
                </div>
                <div class="modal-body" style="background-color: #1D1D26; border-radius: 2vw;">

                    <div class="row" style="background-color: #1D1D26; padding: 0.5vw;">
                        <div class="col" style="background-color: #1D1D26;">
                            <h4 style="color: #FC76A1;">Victim details</h4>
                            <ul class="list-group">
                                <li id="solvedreportuserimage" class="list-group-item"
                                    style="background-color: #1D1D26; color: #FC76A1;"></li>
                                <li id="solvedreportusername" class="list-group-item"
                                    style="background-color: #1D1D26; color: #FC76A1;"></li>
                                <li id="solvedreportgender" class="list-group-item"
                                    style="background-color: #1D1D26; color: #FC76A1;"></li>
                                <li id="solvedreportphone" class="list-group-item"
                                    style="background-color: #1D1D26; color: #FC76A1;">
                                <li id="solvedreportemerphone" class="list-group-item"
                                    style="background-color: #1D1D26; color: #FC76A1;"></li>
                                <li id="solvedreportuseremail" class="list-group-item"
                                    style="background-color: #1D1D26; color: #FC76A1;"></li>
                                <li id="solvedreportuseraddress" class="list-group-item"
                                    style="background-color: #1D1D26; color: #FC76A1;"></li>
                            </ul>
                        </div>
                        <div class="col" style="background-color: #1D1D26; text-align: center;">
                            <h4 style="color: #FC76A1; text-align: center;">Report details</h4>
                            <ul class="list-group">
                                <li id="solvedreportreportimage" class="list-group-item"
                                    style="background-color: #1D1D26; color: #FC76A1;"> <img src="assets/report.png"
                                        style="height: 100px; width: 100px; border-style: solid; border-color: #FC76A1; border-radius: 50%;">
                                </li>
                                <li id="solvedreportreportcaseid" class="list-group-item"
                                    style="background-color: #1D1D26; color: #FC76A1;"></li>
                                <li id="solvedreportreportdate" class="list-group-item"
                                    style="background-color: #1D1D26; color: #FC76A1;"></li>
                                <li id="solvedreportreporttime" class="list-group-item"
                                    style="background-color: #1D1D26; color: #FC76A1;"></li>
                                <li id="solvedreportreportlocation" class="list-group-item"
                                    style="background-color: #1D1D26; color: #FC76A1;"></li>
                                <li id="solvedreportreportcrimetype" class="list-group-item"
                                    style="background-color: #1D1D26; color: #FC76A1;"></li>
                                <li id="solvedreportreportdescription" class="list-group-item"
                                    style="background-color: #1D1D26; color: #FC76A1;"></li>
                                <li id="solvedreportreportpoliceverdict" class="list-group-item"
                                    style="background-color: #1D1D26; color: #FC76A1;"></li>
                            </ul>

                        </div>
                        <div class="col" style="background-color: #1D1D26; text-align: right;">
                            <h4 style="color: #FC76A1; text-align: right;">Police details</h4>
                            <ul class="list-group">
                                <li id="solvedreportreportpolicephoto" class="list-group-item"
                                    style="background-color: #1D1D26; color: #FC76A1;"> </li>
                                <li id="solvedreportreportpolicename" class="list-group-item"
                                    style="background-color: #1D1D26; color: #FC76A1;"></li>
                                <li id="solvedreportreportpolicephone" class="list-group-item"
                                    style="background-color: #1D1D26; color: #FC76A1;"></li>
                                <li id="solvedreportreportpoliceemail" class="list-group-item"
                                    style="background-color: #1D1D26; color: #FC76A1;"></li>
                                <li id="solvedreportreportpolicepost" class="list-group-item"
                                    style="background-color: #1D1D26; color: #FC76A1;"></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Profile Modal -->
    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content" style="background-color: #1D1D26; border-radius: 2vw;">
                <div class="modal-header"
                    style="background-color: #1D1D26; border-color: #1D1D26; border-radius: 2vw; ">
                    <h5 class="modal-title" id="exampleModalLabel" style="color: white; font-weight: 700;">Your
                        Profile
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" style="background-color: #1D1D26; text-align: center; ">

                    <div id="profilemodal">

                    </div>

                    <!-- <img id="img" src="assets/profilepic.png"
                            style="margin: 0.2vw; height: 200px; width: 200px; border-radius: 50%;"> -->
                    <!-- <input type="file" class="btn btn-primary">hi</input> -->
                    <label for="file" class="btn" style="position: absolute; top: 41%; right: 33%;"><img
                            src="assets/uploadimage.png"></label>
                    <input type="file" id="file" style="background-color: #FC76A1;" class="inputfile">
                    <style>
                        .inputfile {
                            width: 0.1px;
                            height: 0.1px;
                            opacity: 0;
                            overflow: hidden;
                            position: absolute;
                            z-index: -1;
                        }
                    </style>

                    <p id="pleasewait" style="color: #FC76A1; font-size: 12px;"></p>

                    <div style="height: 20px;"></div>
                    <ul class="list-group list-group-flush">
                        <li style="background-color: #1D1D26; color: #FC76A1; font-size: 20px; font-weight: 600;"
                            class="list-group-item" id="profilename"></li>
                        <li style="background-color: #1D1D26; color: #FC76A1;" class="list-group-item" id="profilepost">
                        </li>
                        <li style="background-color: #1D1D26; color: #FC76A1;" class="list-group-item"
                            id="profileemail">
                        </li>
                        <li style="background-color: #1D1D26; color: #FC76A1;" class="list-group-item"
                            id="profilephoneno">
                        </li>
                    </ul>

                </div>
                <div style="background-color: #1D1D26; text-align: center; border-radius: 2vw; margin-bottom: 1.5vw;">
                    <a onclick="logout()" type="button" class="btn-lg hover-item"
                        style="background-color: #30303D; border-color: #fc76a1; font-weight: 500; color: white; border-radius: 1vw;"><i
                            class="fas fa-sign-out-alt"></i> Log Out</a>

                </div>
            </div>
        </div>
    </div>

    <script>
        const file = document.getElementById("file")
        const img = document.getElementById("img")
        const url = document.getElementById("url")
        file.addEventListener("change", ev => {

            const pleasewait = document.querySelector("#pleasewait")
            pleasewait.innerHTML += '<br><br>Please wait for another 10 seconds<br>while we update your profile picture.'

            const formdata = new FormData()
            formdata.append("image", ev.target.files[0])
            fetch("https://api.imgur.com/3/image/", {
                method: "post",
                headers: {
                    Authorization: "Client-ID 580de07a0898c59"
                },
                body: formdata
            }).then(data => data.json()).then(data => {
                // img.src = data.data.link
                console.log(data.data.link);

                firebase.auth().onAuthStateChanged(function (user) {

                    db.collection("police").where("email", "==", user.email)
                        .get()
                        .then((querySnapshot) => {
                            querySnapshot.forEach((doc) => {



                                var currentdoc = doc.id;
                                db.collection('police').doc(currentdoc).update({

                                    photo: data.data.link
                                });

                            });
                        })

                });

                setTimeout(function () {
                    window.location.reload(1);
                }, 5000);

            })
        })


    </script>


    <style>
        .hover-item {
            transition: 0.3s;
        }

        .hover-item:hover {
            transform: translate(0, -5px);
        }

        .fade-item:hover {
            background-color: #272732;
        }

        a {

            text-decoration: none;
            color: white;
        }

        a:hover {
            color: #FB4B83;
        }

        #searchbutton:hover {
            color: #FC76A1;
        }

        .colorchange:hover {
            color: #FC76A1;
            cursor: pointer;
        }

        #searchbutton2:hover {
            color: #FC76A1;
        }
    </style>

    <script src="https://www.gstatic.com/firebasejs/8.7.1/firebase.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.7.1/firebase-firestore.js"></script>
    <script>
        // Initialize Firebase
        var config = {
            apiKey: "AIzaSyAOghuR0V463DQDrclJBRqMNH7YDqavNmY",
            authDomain: "crime-mapping-7610d.firebaseapp.com",
            projectId: "crime-mapping-7610d",
            storageBucket: "crime-mapping-7610d.appspot.com",
            messagingSenderId: "928787398601",
            appId: "1:928787398601:web:56f96b0e2a1b41aee47218",
            measurementId: "G-KW51ES0TGV"
        };
        firebase.initializeApp(config);

    </script>
    <script src="index.js"></script>
    <script src="analytics.js"></script>
    <script src="solved-report.js"></script>
    <script src="heatmap.js"></script>
    <script src="logout.js"></script>
    <script src="authenticate.js"></script>
</body>

</html>